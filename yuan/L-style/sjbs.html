<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Sierpiński箭头曲线</title>
  <style>
    #tutorial {
      border: 1px solid black;
      background-color: black;
    }
  </style>
</head>

<body>
  <!-- width="800" height="800" -->
  <canvas id="tutorial">
    不支持
  </canvas>

  <script>
    var canvas = document.getElementById('tutorial');
    let width = 800,
      height = 800,
      h = 400,
      w = 400;

    canvas.width = width;
    canvas.height = height;
    var ctx = canvas.getContext('2d');

    let linchan = 1




    function llinm() {
      let yd = zbzuabh(0, 0)
      // let ybo= zbzuabh(-100,0)
      let ybo = dddzb([0, 0, 0], 0, 100)
      let zhjd = dddzb([-100, 0, 0], 30, 100)
      let zecd = dddzb([zhjd[0], zhjd[1], zhjd[2]], 30, 100)
      ctx.fillStyle = "orange";
      ctx.beginPath()
      ctx.moveTo(yd[0], yd[1]);
      ctx.lineTo(zbzuabh(ybo[0], ybo[1])[0], zbzuabh(ybo[0], ybo[1])[1])

      ctx.stroke()
      console.log(ybo)
    }



    let bginm = "F"
    // let bginm = "F-G-G"

    // let roult = {
    //   F: "F-G+F+G-F", 
    //   G: "GG"
    // } a-f b-g
    let roult = {
      F: "G-F-G", 
      G: "F+G+F"
    }
    let xxyy = [-300, -300, 0]



    function ddid(nm) {
      let sstr = bginm;
      for (var i = 0; i < nm; i++) {
        let arr = sstr.split("");
        let ddfaar = arr.map((a) => {
          if (a == "F") {
            return roult.F
          }
          if (a == "G") {
            return roult.G
          } else {
            return a
          }
        })
        sstr = ddfaar.join("")
      }
      // console.log(sstr)
      ctx.strokeStyle = "#fff";
      ctx.lineWidth = 3
      ctx.beginPath()
      ctx.moveTo(zbzuabh(xxyy[0], xxyy[1])[0], zbzuabh(xxyy[0], xxyy[1])[1]);
      let llth = sstr.length

      for (var i = 0; i < llth; i++) {
        // console.log(sstr[i])
        let xzz = onedw(sstr[i])

        ctx.lineTo(xzz[0], xzz[1])
      }
      ctx.stroke()
    }

    ddid(8)










    function onedw(str) {
      // console.log(str)

      switch (str) {
        case "F":
          xxyy = dddzb(xxyy, 0);

          return zbzuabh(xxyy[0], xxyy[1])
        case "G":
          xxyy = dddzb(xxyy, 0);

          return zbzuabh(xxyy[0], xxyy[1])
        case "+":
          xxyy = dddzb(xxyy, 60);

          return zbzuabh(xxyy[0], xxyy[1])

        case "-":
          xxyy = dddzb(xxyy, -60);

          return zbzuabh(xxyy[0], xxyy[1])


 
        default:
          console.log("没找到")
      }
    }

    //算出下一点坐标
    function dddzb(znar, deg, r = linchan) {
      //角度转化
      let jdhhd = Math.PI / 180 * deg
      let xx = znar[0]
      let yy = znar[1]
      let qq = znar[2]
      let xzjd = jdhhd + qq
      let xinarr = [];
      let xyxzxx = xx + Math.cos(xzjd) * r;
      let xyxzyy = yy + Math.sin(xzjd) * r;

      return [xyxzxx, xyxzyy, xzjd]
    }


    function zbzuabh(a, b) {

      return [w + a, h - b]
    }
  </script>
</body>

</html>